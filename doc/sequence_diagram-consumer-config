title Consumer configuration

loop Add Consumer
alt New Client
    konga->oxd: Create client(setup_client)
    oxd->OP:
    OP->oxd:
    oxd->konga: Return with client credentials
    konga->konga_DB: Store client_credentials
    note over konga_DB
        oxd_id,
        client_id_of_oxd_id: used to show oxd e-comm report,
        setup_client_oxd_id: used to show oxd e-comm report,
        client_id,
        client_secret: used to update client_expire time.
    end note
else Use Existing Client
    note over konga
        User can use existing client credentials
        Enter oxd_id,
        Enter client_id_of_oxd_id: used to show oxd e-comm report,
        Enter setup_client_oxd_id: used to show oxd e-comm report,
        Enter client_id,
        Enter client_secret: used to update client_expire time.
    end note
    konga->konga_DB: Store client_credentials
end

alt if user want uma_mode
    konga->kong: Add consumer with {username: "foo", custom_id: client_id_of_oxd_id}
else
    konga->kong: Add consumer with {username: "foo", custom_id: client_id}
end
kong->kong_DB: Add consumer
kong_DB->kong:
kong->konga: Return consumer {id, username, custom_id}
end